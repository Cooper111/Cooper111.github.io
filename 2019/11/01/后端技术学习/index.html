<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="后端技术学习&amp;amp;&amp;amp;总结前端Vue.js，后端Flask+Uwsgi+Nginx+Redis+mysql，项目配了TF+Keras两个模型。对学习的后端技术进行总结，分为下面几部分  安装&amp;amp;&amp;amp;踩坑 配置&amp;amp;&amp;amp;踩坑 作用&amp;amp;&amp;amp;解析    安装&amp;amp;&amp;amp;踩坑Uwsgi安装安装其实很简单的一条命令：pip install uwsgi，但通">
<meta property="og:type" content="article">
<meta property="og:title" content="后端技术学习">
<meta property="og:url" content="https://cooper111.github.io/2019/11/01/后端技术学习/index.html">
<meta property="og:site_name" content="Cooper111&#39;s Blog">
<meta property="og:description" content="后端技术学习&amp;amp;&amp;amp;总结前端Vue.js，后端Flask+Uwsgi+Nginx+Redis+mysql，项目配了TF+Keras两个模型。对学习的后端技术进行总结，分为下面几部分  安装&amp;amp;&amp;amp;踩坑 配置&amp;amp;&amp;amp;踩坑 作用&amp;amp;&amp;amp;解析    安装&amp;amp;&amp;amp;踩坑Uwsgi安装安装其实很简单的一条命令：pip install uwsgi，但通">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-11-01T15:26:01.237Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="后端技术学习">
<meta name="twitter:description" content="后端技术学习&amp;amp;&amp;amp;总结前端Vue.js，后端Flask+Uwsgi+Nginx+Redis+mysql，项目配了TF+Keras两个模型。对学习的后端技术进行总结，分为下面几部分  安装&amp;amp;&amp;amp;踩坑 配置&amp;amp;&amp;amp;踩坑 作用&amp;amp;&amp;amp;解析    安装&amp;amp;&amp;amp;踩坑Uwsgi安装安装其实很简单的一条命令：pip install uwsgi，但通">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://cooper111.github.io/2019/11/01/后端技术学习/"/>





  <title>后端技术学习 | Cooper111's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	
	<a href="https://github.com/Cooper111" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cooper111's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">A lazy student.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cooper111.github.io/2019/11/01/后端技术学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="花郎世纪">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper111's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">后端技术学习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-01T23:24:21+08:00">
                2019-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flask/" itemprop="url" rel="index">
                    <span itemprop="name">Flask</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="后端技术学习-amp-amp-总结"><a href="#后端技术学习-amp-amp-总结" class="headerlink" title="后端技术学习&amp;&amp;总结"></a>后端技术学习&amp;&amp;总结</h1><p>前端<code>Vue.js</code>，后端<code>Flask+Uwsgi+Nginx+Redis+mysql</code>，项目配了<code>TF+Keras</code>两个模型。对学习的后端技术进行总结，分为下面几部分</p>
<ul>
<li>安装&amp;&amp;踩坑</li>
<li>配置&amp;&amp;踩坑</li>
<li>作用&amp;&amp;解析</li>
</ul>
<hr>

<h2 id="安装-amp-amp-踩坑"><a href="#安装-amp-amp-踩坑" class="headerlink" title="安装&amp;&amp;踩坑"></a>安装&amp;&amp;踩坑</h2><h4 id="Uwsgi安装"><a href="#Uwsgi安装" class="headerlink" title="Uwsgi安装"></a><code>Uwsgi</code>安装</h4><p>安装其实很简单的一条命令：<code>pip install uwsgi</code>，但通常<code>ubuntu</code>用户安装时编译会<strong>报错</strong>，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal error: bytecode stream generated with LTO version x.0 instead of the expected x.x</span><br></pre></td></tr></table></figure>
<p>首先建议使用<code>conda</code>的环境，避免是没有类似<code>python-dev</code>这样基础的环境包导致报错。</p>
<p>然后这个报错写着是<code>LTO</code>版本不对，但官方文档上说<code>asd</code>,可以看下<a href="https://techoverflow.net/2017/06/22/how-to-resolve-fatal-error-bytecode-stream-generated-with-lto-version-instead-of-the-expected/" target="_blank" rel="noopener">这里</a>,其实应该是<code>gcc</code>版本不对，太高了。</p>
<p><strong>解决方法</strong>：降低<code>gcc</code>版本（我的16.04原来<code>gcc</code>版本是5.4）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">sudo apt-get install gcc<span class="number">-4.8</span></span><br><span class="line"><span class="comment">#查看当前版本</span></span><br><span class="line">ls /usr/bin/gcc*</span><br><span class="line"><span class="comment">#设置4.8为优先使用版本</span></span><br><span class="line">sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc<span class="number">-4.8</span> <span class="number">100</span></span><br><span class="line"><span class="comment">#重新安装uwsgi</span></span><br><span class="line">pip install uwsgi / conda install uwsgi</span><br></pre></td></tr></table></figure>
<h4 id="Redis安装"><a href="#Redis安装" class="headerlink" title="Redis安装"></a><code>Redis</code>安装</h4><p>首先在<code>Ubuntu</code>上安装<code>Redis</code>，安装完成后<code>Redis</code>服务会自动启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install redis-server</span><br></pre></td></tr></table></figure>
<p>手动启动则输入<code>redis-server</code>即可</p>
<h4 id="Nginx安装"><a href="#Nginx安装" class="headerlink" title="Nginx安装"></a><code>Nginx</code>安装</h4><p>简单点，<code>apt-get</code>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">查看是否成功</span></span><br><span class="line">nginx -v</span><br></pre></td></tr></table></figure>
<hr>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>概要：配置<code>uwsgi.ini</code>，启动<code>uwsgi</code>。</p>
<h3 id="Uwsgi配置"><a href="#Uwsgi配置" class="headerlink" title="Uwsgi配置"></a><code>Uwsgi</code>配置</h3><p><code>Uwigi</code>最重要的配置就是<code>uwsgi.ini</code>了，配置首先第一步是<code>touch</code>创建<code>uwsgi.ini</code>后放在项目根目录。</p>
<h4 id="几个基本参数"><a href="#几个基本参数" class="headerlink" title="几个基本参数"></a>几个基本参数</h4><ul>
<li><p><code>pythonpath</code>：<code>python</code>环境目录。如果是<code>conda</code>的环境就不用配置这个了，<code>shell</code>里<code>source activate YourEnv</code>即可。如果是自己创的虚拟环境，则配置到python环境bin目录下的<code>python</code>，<code>e.g</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定python环境</span></span><br><span class="line">pythonpath = /home/applex/conda/envs/myproject/bin</span><br></pre></td></tr></table></figure>
<p>注：还有两个参数<code>home</code>和一个指定虚拟环境env啥的，<strong>容易报一个<code>Encoding</code>错</strong>，建议别用。</p>
</li>
<li><p><code>http</code>参数，<code>http</code>协议对客户端开发的端口号，客户端通过此端口访问<code>flask web</code> 服务接口。如果设置了该参数其实等同与同时设置了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">protocol = http  <span class="comment">#设置默认的通信协议（uwsgi，http，fastcgi）</span></span><br><span class="line">socket = <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">5000</span> <span class="comment">#5000是举个例子</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>wsgi-file</code>和<code>chdir</code>。<code>wsgi-file</code>是<code>web</code> 应用<code>python</code>主程序。<code>chdir</code>是项目根目录，即当前工作台。我的项目根目录为<code>/home/kavin/rjb/</code>,主程序为<code>app.py</code>，<code>shell</code>开在项目根目录，所以这里该这么写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chdir = /home/kavin/rjb/</span><br><span class="line">wsgi-file = app.py  #看shell位置设置打</span><br></pre></td></tr></table></figure>
<p>注：这里的设置不对<strong>很容易报错<code>unable to load app 0......</code></strong>。还有个坑就是项目的<code>module</code>或者<code>app</code>都得有<code>__init__.py</code>这个文件，不然也会报这个错（这坑躺了挺久…）</p>
</li>
<li><p><code>master</code>参数。启动主进程，来管理其他进程，其它的<code>uwsgi</code>进程都是这个<code>master</code>进程的子进程，如果<code>kill</code>这个<code>master</code>进程，相当于重启所有的<code>uwsgi</code>进程。 </p>
<p>下面说说我遇到的问题，通常博客给的设置里<code>master=true</code>，但是我做的项目里运行<code>tf+keras</code>模型，一设置该参数就报<strong>一个<code>CUDA</code>的错</strong>。所以行<code>tf+keras</code>模型时将该参数去掉。</p>
</li>
<li><p><code>buffer_size</code>参数，设置用于<code>uwsgi</code>包解析的内部缓存区大小为<code>64k</code>。默认是<code>4k</code>，即<code>4096Bit</code>。但如果先项目运行<code>tf+keras</code>模型，则建议修改为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buffer-size = <span class="number">327680</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>其他几个常用参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使进程在后台运行，并将日志打到指定的日志文件或者udp服务器</span></span><br><span class="line">daemonize = /var/log/myapp_uwsgi.log </span><br><span class="line"><span class="comment">#设置最大日志文件大小</span></span><br><span class="line">log-maxsize = <span class="number">5000000</span></span><br><span class="line"><span class="comment">#指定pid文件</span></span><br><span class="line">pidfile = /var/run/uwsgi.pid</span><br><span class="line"><span class="comment">#当服务器退出的时候自动删除unix socket文件和pid文件</span></span><br><span class="line">vacuum = true </span><br><span class="line"><span class="comment">#启动2个工作进程，生成指定数目的worker/进程</span></span><br><span class="line">processes = <span class="number">2</span></span><br><span class="line"><span class="comment">#启动10个工作线程</span></span><br><span class="line">threads = <span class="number">10</span></span><br><span class="line"><span class="comment"># 一般在主运行程序 run_app.py 里指定 app = Flask(__name__)</span></span><br><span class="line">callable = app</span><br></pre></td></tr></table></figure>
</li>
<li><p>下面给出我的基础配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line"><span class="meta">#</span><span class="bash">master = <span class="literal">true</span></span></span><br><span class="line">http = 127.0.0.1:5000 			# 不开nginx代理时使用</span><br><span class="line"><span class="meta">#</span><span class="bash">socket = 127.0.0.1:5000		<span class="comment"># 开nginx代理时使用	 </span></span></span><br><span class="line">chdir = /home/kavin/rjb/</span><br><span class="line">wsgi-file = app.py</span><br><span class="line">callable = app</span><br><span class="line">processes = 1</span><br><span class="line">threads = 3</span><br><span class="line">buffer-size = 327680</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="几个命令"><a href="#几个命令" class="headerlink" title="几个命令"></a>几个命令</h3><p>然后启动<code>uwsgi.ini</code>。</p>
<ul>
<li><p>启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --ini uwsgi.ini</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看<code>uwsgi</code>是否运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep uwsgi</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看端口号占用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp | grep 7878 # 上一步查出来的</span><br></pre></td></tr></table></figure>
</li>
<li><p>结束<code>uwsgi</code>进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pgrep uwsgi | xargs kill -s 9</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a><code>Nginx</code>配置</h3><p><strong>概要</strong>：配置<code>nginx.conf</code>，检测配置文件，启动。</p>
<p>首先简单看一下<code>nginx</code>的文件结构。</p>
<ul>
<li><code>/usr/sbin/nginx</code>：主程序</li>
<li><code>/etc/nginx</code>：存放配置文件</li>
<li><code>/usr/share/nginx</code>：存放静态文件</li>
<li><code>/var/log/nginx</code>：存放日志</li>
</ul>
<p>可以先使用<code>sudo /etc/init.d/nginx start</code>启动默认的配置试试～</p>
<p>然后在项目根目录创建<code>nginx.conf</code>，编辑如下（附带解释）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Flask dataV api</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server块：配置虚拟主机的相关参数，一个http中可以有多个server。</span></span><br><span class="line">server &#123;</span><br><span class="line">	listen 3389;   #nginx代理的主机端口</span><br><span class="line">	server_name test; #server_name 可以是域名，也可以写 ip 地址</span><br><span class="line">	charset utf-8;</span><br><span class="line">	client_max_body_size 75M;</span><br><span class="line"><span class="meta">	#</span><span class="bash">location块：配置请求的路由，以及各种页面的处理情况。</span></span><br><span class="line">	location / &#123;</span><br><span class="line"><span class="meta">		#</span><span class="bash">文件扩展名与文件类型映射表</span></span><br><span class="line">		include uwsgi_params;</span><br><span class="line"><span class="meta">		#</span><span class="bash">uwsgi_pass 是表明 Nginx 与 uwsgi 的交流方式。我这里选择的是制定的端口号进行和uwsgi的socket通信。</span></span><br><span class="line">		uwsgi_pass 127.0.0.1:5000; </span><br><span class="line"><span class="meta">		#</span><span class="bash">uwsgi的python环境</span></span><br><span class="line">		uwsgi_param UWSGI_PYTHON /home/kavin/anaconda3/envs/ocr/bin/python; </span><br><span class="line"><span class="meta">		#</span><span class="bash">项目的根目录</span></span><br><span class="line">		uwsgi_param UWSGI_CHDIR /home/kavin/rjb;</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 项目的主程序，比如你测试用run.py文件，文件中app = Flask(__name__)，那么这里就填run:app 。我是app.py</span></span><br><span class="line">		uwsgi_param UWSGI_SCRIPT app:app; </span><br><span class="line"><span class="meta">		#</span><span class="bash">其他参数：deny 127.0.0.1;  <span class="comment">#拒绝的ip</span></span></span><br><span class="line"><span class="meta">		#</span><span class="bash">其他参数：allow 172.18.5.54; <span class="comment">#允许的ip </span></span></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意！配置完毕后我们萌新常犯一个错误，直接这样启动<code>nginx</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo  nginx /home/kavin/rjb/nginx.conf</span><br><span class="line">或者</span><br><span class="line">sudo  nginx /home/kavin/rjb/nginx.conf</span><br></pre></td></tr></table></figure>
<p>会报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx: [emerg] "server" directive is not allowed here in /home/kavin/rjb/nginx.conf:1</span><br></pre></td></tr></table></figure>
<p>按照英文提示，我们应该将配置存放在允许的地方。我推荐按照下面两部走：</p>
<ul>
<li><p>首先，删除默认配置并将项目配置文件软链接到目的地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/nginx/sites-enabled/default</span><br><span class="line">sudo ln -s /home/kavin/rjb/nginx.conf /etc/nginx/conf.d/</span><br></pre></td></tr></table></figure>
</li>
<li><p>其次，检测配置文件是否正确</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t -c /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>若无问题，则可以启动<code>Nginx</code>。</p>
<p>我的一些习惯命令是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/nginx start</span><br><span class="line">sudo /etc/init.d/nginx stop</span><br><span class="line">sudo /etc/init.d/nginx restart</span><br></pre></td></tr></table></figure>
<h3 id="Redis配置"><a href="#Redis配置" class="headerlink" title="Redis配置"></a><code>Redis</code>配置</h3><p><strong>概要</strong>：修改程序主文件，启动<code>Redis</code>。<br><code>Redis</code>是高性能的<code>key-value</code>数据库.<br><code>flask</code>也提供了缓存模块<code>flask-cache</code>，该模块可以连接<code>Redis</code>数据库进行缓存。具体来说，可以缓存以下几个方面：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、缓存视图函数</span><br><span class="line">    缓存视图函数**@cache.cached**必须在路由之后</span><br><span class="line">    @cache.cached 装饰器可以判断是否已经存在缓存，如果有缓存，使用，如果没有缓存，查询然后缓存，再使用</span><br><span class="line"><span class="number">2</span>.缓存Jinja2片段</span><br><span class="line">	使用cache标签在模板中设置缓存，单位默认是秒</span><br><span class="line">	&#123;%cache <span class="number">3600</span>%&#125;</span><br><span class="line">	&lt;div&gt;detail...&lt;/div&gt;</span><br><span class="line">	&#123;%endcache%&#125;</span><br><span class="line"><span class="number">3</span>.缓存api</span><br><span class="line">    - 设置缓存：cache.set(key,value,timeout)</span><br><span class="line">    - 获取缓存：cache.get(key)</span><br><span class="line">    <span class="comment">#e.g.   </span></span><br><span class="line">    <span class="comment">#		cache.get('view//article/list')</span></span><br><span class="line">    <span class="comment">#		cache.get('blog_cache/view//acticle/list')</span></span><br><span class="line">    - 删除缓存：cache.delete(key)</span><br><span class="line">    - 清空缓存：cache.clear()</span><br></pre></td></tr></table></figure>
<p>以下是参考的博客的经验总结：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">一般在项目中，因为业务的复杂性，一般使用缓存api自定义缓存，这样更加灵活。比如电商的首页的商品分类和模块栏，一般都是不变的，这样的内容可以缓存起来。</span><br><span class="line"></span><br><span class="line"><span class="comment">#那么什么时候要更新缓存的？</span></span><br><span class="line">假设商品分类修改了，这时候需要首先删除原来的缓存，然后查询数据库得到新的数据，再放入缓存中一份。下次再访问的时候又可以使用缓存了。</span><br><span class="line">设置一个函数方法，当我们修改缓存的东西时，调用该方法删除缓存</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(request)</span>:</span> </span><br><span class="line">    print(<span class="string">'add user success'</span>) </span><br><span class="line">    cache.delete(<span class="string">'users'</span>) </span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'add'</span>)</span><br></pre></td></tr></table></figure>
<p>我们项目这里采用了<code>Redis</code>结合<code>Flask-cache</code>来缓存视图，具体如下（附解释）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_cache <span class="keyword">import</span> Cache</span><br><span class="line"><span class="comment">#初始化</span></span><br><span class="line">cache = Cache()</span><br><span class="line"><span class="comment">#配置redis链接的config</span></span><br><span class="line">config = &#123;</span><br><span class="line">  <span class="string">'CACHE_TYPE'</span>: <span class="string">'redis'</span>, <span class="comment">#缓存到redis数据库</span></span><br><span class="line">  <span class="comment"># CACHE_TYPE = 'simple'  #缓存到内存</span></span><br><span class="line">  <span class="string">'CACHE_KEY_PREFIX'</span>: <span class="string">'bank/'</span>,</span><br><span class="line">  <span class="string">'CACHE_REDIS_HOST'</span>: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">  <span class="string">'CACHE_REDIS_PORT'</span>: <span class="number">6379</span>,</span><br><span class="line">  <span class="string">'CACHE_REDIS_DB'</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="string">'CACHE_REDIS_PASSWORD'</span>: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">#初始化</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_object(config)</span><br><span class="line">cache.init_app(app,config)</span><br><span class="line"></span><br><span class="line"><span class="comment">#装饰器调用</span></span><br><span class="line"><span class="comment">#e.g.</span></span><br><span class="line"><span class="meta">@app.route('/index2')</span></span><br><span class="line"><span class="meta">@cache.cached(timeout=20)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index2</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">if</span>(session[<span class="string">'username'</span>] <span class="keyword">and</span> session[<span class="string">'password'</span>] <span class="keyword">and</span> session[<span class="string">'permission'</span>]==<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index2.html'</span>)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">  	<span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="几个基本命令"><a href="#几个基本命令" class="headerlink" title="几个基本命令"></a>几个基本命令</h3><ul>
<li>执行命令访问Redis客户端：<strong><em>\</em>redis-cli**</strong></li>
<li>设置键值对命令：<strong><em>\</em>set key value**</strong></li>
<li>取出键值对命令：<strong><em>\</em>get key**</strong></li>
<li>启动命令：<strong><em>\</em>redis-server**</strong></li>
</ul>
<p>然后启动<code>Redis</code>，界面怪好看的～</p>
<hr>



<h2 id="作用-amp-amp-解析"><a href="#作用-amp-amp-解析" class="headerlink" title="作用&amp;&amp;解析"></a>作用&amp;&amp;解析</h2><p>我的项目生产环境配置是<code>Flask+Uwsgi+Nginx+Redis+mysql</code>，前端找大哥用<code>Vue</code>写的，项目内调用了<code>tf+keras</code>的模型。</p>
<p>项目一开始成型的时候其实只有<code>Flask+mysql</code>，在本地也能跑的挺好哒，那为什么需要配置这些呢？下面是我在配置中的学习记录和理解。</p>
<h3 id="Uwsgi理解"><a href="#Uwsgi理解" class="headerlink" title="Uwsgi理解"></a><code>Uwsgi</code>理解</h3><p>若直接使用<code>Flask</code>自带的<code>WSGI</code>（Web服务器）：<code>Werkzeug</code>，会提示<code>Not in preducting enviroment...</code>，可能会觉得没啥问题。</p>
<p>但是对于大项目来说，<code>flask</code>自带的开发<code>Web</code>服务器表现很差，响应慢，而且直接通过<code>nginx</code>进行反向代理，经常无法响应请求。有两个可以在生产环境中使用、性能良好且支持<code>Flask</code>程序的服务器，分别是<code>Gunicorn</code>和<code>uWSGI</code>，但是这两个模块不提供对<code>windows</code>的支持。</p>
<p><code>uWSGI</code>是一个<a href="http://baike.baidu.com/item/Web服务器" target="_blank" rel="noopener">Web服务器</a>，它实现了<code>WSGI协议、uwsgi、http</code>等协议。<code>Nginx</code>中<code>HttpUwsgiModule</code>的作用是与<code>uWSGI</code>服务器进行交换。</p>
<h4 id="uWSGI的主要特点是："><a href="#uWSGI的主要特点是：" class="headerlink" title="uWSGI的主要特点是："></a><code>uWSGI</code>的主要特点是：</h4><ul>
<li>超快的性能</li>
<li>低内存占用</li>
<li>多<code>app</code>管理</li>
<li>详尽的日志功能（可以用来分析<code>app</code>的性能和瓶颈）</li>
<li>高度可定制（内存大小限制，服务一定次数后重启等）</li>
</ul>
<h4 id="要注意WSGI-uwsgi-uWSGI这三个概念的区分"><a href="#要注意WSGI-uwsgi-uWSGI这三个概念的区分" class="headerlink" title="要注意WSGI / uwsgi / uWSGI这三个概念的区分"></a>要注意<code>WSGI / uwsgi / uWSGI</code>这三个概念的区分</h4><ul>
<li><code>WSGI</code>是一种通信协议。</li>
<li><code>uwsgi</code>是一种线路协议而不是通信协议，在此常用于在<code>uWSGI</code>服务器与其他网络服务器的数据通信。</li>
<li>而<code>uWSGI</code>是实现了<code>uwsgi</code>和<code>WSGI</code>两种协议的Web服务器。</li>
</ul>
<p><code>uwsgi</code>协议是一个<code>uWSGI</code>服务器自有的协议，它用于定义传输信息的类型（type of information），每一个<code>uwsgi packet</code>前4<code>byte</code>为传输信息类型描述，它与<code>WSGI</code>相比是两样东西。</p>
<h4 id="为什么使用uWSGI？uWSGI的好处？"><a href="#为什么使用uWSGI？uWSGI的好处？" class="headerlink" title="为什么使用uWSGI？uWSGI的好处？"></a>为什么使用<code>uWSGI</code>？<code>uWSGI</code>的好处？</h4><p>一下摘自<a href="https://cloud.tencent.com/developer/ask/55053" target="_blank" rel="noopener">知乎</a>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通常最好在与主Web服务器分开的过程中运行Python。这样，Web服务器可以有很多细小的线程，它们可以非常快速地为静态内容提供服务，而单独的Python进程将会很大并且很重量级，并且每个都会运行他们自己的Python解释器。所以普通WSGI是不好的，因为它用一个大的Python解释器膨胀了你的每一个nginx线程。</span><br><span class="line"></span><br><span class="line">使用flup或gunicorn或uWSGI后面nginx要好得多，因为腾出的nginx简单地提供内容，并让您选择多少个微小的光nginx的线程运行，独立您选择的您带来多少重量级的Python线程最多提供动态内容的。目前人们似乎很高兴gunicorn，但这三种选择中的任何一种都可以正常工作。</span><br><span class="line"></span><br><span class="line">展望未来，当负载开始变得严重时，它还可以将Python移动到另一台服务器。</span><br></pre></td></tr></table></figure>
<p><code>uWSGI</code>服务器自己实现了基于<code>uwsgi</code>协议的<code>server</code>部分，我们只需要在<code>uwsgi</code>的配置文件中指定<code>application</code>的地址，<code>uWSGI</code>就能直接和应用框架中的<code>WSGI application</code>通信。</p>
<h3 id="Nginx理解"><a href="#Nginx理解" class="headerlink" title="Nginx理解"></a><code>Nginx</code>理解</h3><p>搬运自<a href="https://www.cnblogs.com/leiziv5/p/7137277.html" target="_blank" rel="noopener">博客</a>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Nginx 是高效的 Web 服务器和反向代理服务器，可以用作负载均衡（当有 n 个用户访问服务器时，可以实现分流，分担服务器的压力），与 Apache 相比，Nginx 支持高并发，可以支持百万级的 TCP 连接，十万级别的并发连接，部署简单，内存消耗少，成本低，但 Nginx 的模块没有 Apache 丰富。Nginx 支持 uWSGI 的 uwsgi 协议，因此我们可以将 Nginx 与 uWSGI 结合起来，Nginx 通过 uwsgi_pass 将动态内容交给 uWSGI 处理。</span><br><span class="line"></span><br><span class="line">官方文档在这</span><br><span class="line"><span class="comment">#https://www.nginx.com/resources/wiki/</span></span><br><span class="line">最好的 Nginx 教程在这</span><br><span class="line"><span class="comment">#http://openresty.org/download/agentzh-nginx-tutorials-zhcn.html</span></span><br></pre></td></tr></table></figure>
<h3 id="Redis理解"><a href="#Redis理解" class="headerlink" title="Redis理解"></a><code>Redis</code>理解</h3><p>下面是对<code>Redis</code>简单的介绍。</p>
<ul>
<li><code>Redis</code>是一个高性能的key-value数据库;将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用;</li>
<li><code>Redis</code>不仅仅支持简单的<code>key-value</code>类型的数据，同时还提供<code>list，set，zset，hash</code>等数据结构的存储;</li>
<li><code>Redis</code>支持数据的备份，即master-slave模式的数据备份。</li>
</ul>
<p>而类似<code>Django</code>框架,<code>Flask</code>提供了<code>flask-cache</code>模块去链接<code>Redis</code>数据库,来提高访问速度和减少服务器负载，具体来说<code>Flask</code>使用<code>Redis</code>可以缓存：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、缓存视图函数</span><br><span class="line"><span class="number">2</span>、缓存Jinja2片段</span><br><span class="line"><span class="number">3</span>、缓存api</span><br></pre></td></tr></table></figure>
<p>在前面<code>配置</code>部分已经给出，请见前。</p>
<h2 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h2><p>写的挺浅滴，是为了项目所用的，之后有空继续深入。附一下运行我的项目所有步骤：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">先开一个shell用于redis</span></span><br><span class="line">redis-server</span><br><span class="line"><span class="meta">#</span><span class="bash">再开一个shell，并激活conda环境</span></span><br><span class="line">source activate rjb</span><br><span class="line"><span class="meta">#</span><span class="bash">进入工作台</span></span><br><span class="line">cd /home/kavin/rjb</span><br><span class="line"><span class="meta">#</span><span class="bash">启动uwsgi</span></span><br><span class="line">uwsgi --ini uwsgi.ini</span><br><span class="line"><span class="meta">#</span><span class="bash">再开一个shell，启动nginx（sudo键入的主机密码是我生日）</span></span><br><span class="line">sudo /etc/init.d/nginx start</span><br><span class="line"><span class="meta">#</span><span class="bash">======================</span></span><br><span class="line"><span class="meta">#</span><span class="bash">分布式项目，登录训练用服务器</span></span><br><span class="line">source activate fuck</span><br><span class="line">cd rjb</span><br><span class="line">python use.py</span><br><span class="line"><span class="meta">#</span><span class="bash">点击一键生成训练数据，一键训练模型测试</span></span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">uwsgi</span></span><br><span class="line">https://www.cnblogs.com/vsignsoft/p/9300160.html</span><br><span class="line">https://www.cnblogs.com/applex007/p/10287351.html</span><br><span class="line">https://blog.csdn.net/lmz_lmz/article/details/92583636</span><br><span class="line">https://www.jianshu.com/p/6ae98e93d595</span><br><span class="line">https://blog.csdn.net/Liu_Jack/article/details/53643245</span><br><span class="line">https://www.jianshu.com/p/679dee0a4193</span><br><span class="line"><span class="meta">#</span><span class="bash">nginx</span></span><br><span class="line">https://www.cnblogs.com/leiziv5/p/7137277.html</span><br><span class="line">坑：软链接</span><br><span class="line"><span class="meta">#</span><span class="bash">redis</span></span><br><span class="line">https://blog.csdn.net/panjunxiao/article/details/100926667</span><br></pre></td></tr></table></figure>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>深度解析：</p>
<ul>
<li><code>WSGI</code>，<code>uWSGI</code>原理层面。</li>
<li><code>Nginx</code>参数配置和解析</li>
<li><code>Redis</code>使用和解析</li>
</ul>
<p>​                                                                                <strong>——Kevin</strong>                                        </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/10/21/JDATA2018-learn/" rel="next" title="JDATA2018_learn">
                <i class="fa fa-chevron-left"></i> JDATA2018_learn
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/12/23/CCF情感分析赛道/" rel="prev" title="CCF情感分析赛道">
                CCF情感分析赛道 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">花郎世纪</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">82</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#后端技术学习-amp-amp-总结"><span class="nav-number">1.</span> <span class="nav-text">后端技术学习&amp;&amp;总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-amp-amp-踩坑"><span class="nav-number">1.1.</span> <span class="nav-text">安装&amp;&amp;踩坑</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Uwsgi安装"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">Uwsgi安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis安装"><span class="nav-number">1.1.0.2.</span> <span class="nav-text">Redis安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx安装"><span class="nav-number">1.1.0.3.</span> <span class="nav-text">Nginx安装</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置"><span class="nav-number">1.2.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Uwsgi配置"><span class="nav-number">1.2.1.</span> <span class="nav-text">Uwsgi配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#几个基本参数"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">几个基本参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#几个命令"><span class="nav-number">1.2.2.</span> <span class="nav-text">几个命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx配置"><span class="nav-number">1.2.3.</span> <span class="nav-text">Nginx配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis配置"><span class="nav-number">1.2.4.</span> <span class="nav-text">Redis配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#几个基本命令"><span class="nav-number">1.2.5.</span> <span class="nav-text">几个基本命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#作用-amp-amp-解析"><span class="nav-number">1.3.</span> <span class="nav-text">作用&amp;&amp;解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Uwsgi理解"><span class="nav-number">1.3.1.</span> <span class="nav-text">Uwsgi理解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#uWSGI的主要特点是："><span class="nav-number">1.3.1.1.</span> <span class="nav-text">uWSGI的主要特点是：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#要注意WSGI-uwsgi-uWSGI这三个概念的区分"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">要注意WSGI / uwsgi / uWSGI这三个概念的区分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么使用uWSGI？uWSGI的好处？"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">为什么使用uWSGI？uWSGI的好处？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx理解"><span class="nav-number">1.3.2.</span> <span class="nav-text">Nginx理解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis理解"><span class="nav-number">1.3.3.</span> <span class="nav-text">Redis理解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#感受"><span class="nav-number">1.4.</span> <span class="nav-text">感受</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">1.5.</span> <span class="nav-text">参考</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TODO"><span class="nav-number">2.</span> <span class="nav-text">TODO</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">花郎世纪</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
